#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "ğŸ” Running pre-commit checks..."

# Check if backend is running (optional check)
echo "ğŸ“¡ Checking if backend server is running..."
if ! curl -s http://localhost:5000/health > /dev/null 2>&1; then
    echo "âš ï¸  Warning: Backend server doesn't seem to be running on http://localhost:5000"
    echo "ğŸ’¡ Start the backend with: cd backend && npm run dev"
    echo "ğŸ’¡ Or skip this check by using: git commit --no-verify"
fi

# Check if frontend is running (optional check)
echo "ğŸŒ Checking if frontend server is running..."
if ! curl -s http://localhost:3000 > /dev/null 2>&1; then
    echo "âš ï¸  Warning: Frontend server doesn't seem to be running on http://localhost:3000"
    echo "ğŸ’¡ Start the frontend with: cd frontend && npm start"
    echo "ğŸ’¡ Or skip this check by using: git commit --no-verify"
fi

echo "ğŸ§ª Skipping Playwright Smoke Tests for now..."

# Comment out the test execution
# npm run test:smoke

# Always proceed with commit
echo "âœ… Proceeding with commit (tests skipped)..."
